
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <title>JSDoc Documentation</title>
        <style>
          body { font-family: Arial, sans-serif; }
          h1 { color: #333; }
          pre { background: #f4f4f4; padding: 10px; }
        </style>
      </head>
      <body>
        <div><h1>app.js.html</h1>

<div id="main">

    <h1 class="page-title">Source: app.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { showTests } from "./tests/tests.js";
import { showAreas } from "./areas/areas.js";

import { handleTimer } from "./timer/timer.js";

import { getData } from "./data/get-data.js";
import { getFromLocalStorage, saveToLocalStorage } from "./utils/localStorage.js";

let counter = 0

const handleInterface = () =&gt; {
    counter += 1
    handleTimer()

    if (counter % 3 === 0) {
        counter = 0
        fetchZones()
    }
}
/**
 * Асинхронно получает данные, сохраняет их в локальное хранилище и отображает тесты и области
 * @returns {Promise&lt;number&gt;} Число 0 после успешного выполнения
 */
async function fetchZones() {
    
    let data = await getData()
    saveToLocalStorage(data)

    showTests(data)
    showAreas(data)

    window.addEventListener('resize', () =&gt; {
        showAreas(data)
    })

    // showTests(blocks)
    // showAreas(blocks)

    return 0;
}

// let data = JSON.parse(getFromLocalStorage())

// if (data) {
//     showTests(data)
//     showAreas(data)
// }

// setInterval(handleInterface, 1000)

fetchZones()
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#fetchZones">fetchZones</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Jun 05 2025 16:28:24 GMT+0300 (Москва, стандартное время)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>


</div><div><h1>areas.js.html</h1>

<div id="main">

    <h1 class="page-title">Source: areas.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { makeJSONUnique } from "../utils/makeJSONUnique.js"
import { shuffle } from "../utils/shuffle.js"

let flag = false

/**
 * Отображает области в HTML-контейнере с идентификатором 'areas-container' и активирует обработчики кликов
 * @param {Object} blocks - Объект с данными, содержащий MainBlock с секциями
 * @returns {boolean} Возвращает true после успешного выполнения
 */
const showAreas = (blocks) =&gt; {
    const areasContainer = document.getElementById('areas-container')
    areasContainer.innerHTML = ''

    for (let i = 0; i &lt; blocks.MainBlock.Sections.length; i++) {
        const area = blocks.MainBlock.Sections[i]

        const areaDiv = document.createElement('div')
        areaDiv.className = 'area-div'

        if (i === 0) {
            areaDiv.id = 'area-active'
        }

        if (i === blocks.MainBlock.Sections.length - 1 &amp;&amp; i !== 0) {
            areaDiv.id = 'area-last'
        }

        const areaHeading = document.createElement('h2')
        areaHeading.textContent = area.GeneralName

        areaDiv.appendChild(areaHeading)

        areaDiv.addEventListener('click', () =&gt; {
            const active = document.getElementById('area-active')
            active.removeAttribute('id')

            areaDiv.id = 'area-active'

            localStorage.setItem('active-zone', areaDiv.textContent)

            showActiveArea(blocks)
        })

        areasContainer.appendChild(areaDiv)
    }
    showActiveArea(blocks)

    return true
}

/**
 * Находит информацию об области по её имени
 * @param {string} name - Имя области
 * @param {Object} blocks - Объект с данными, содержащий MainBlock с секциями
 * @returns {Object|undefined} Объект области или undefined, если область не найдена
 */
const getAreaInfoByName = (name, blocks) =&gt; {
    for (let i = 0; i &lt; blocks.MainBlock.Sections.length; i++) {
        if (name === blocks.MainBlock.Sections[i].GeneralName) {
            return blocks.MainBlock.Sections[i]
        }
    }
}

/**
 * Отображает информацию об активной области в HTML-контейнере с идентификатором 'active-area-wrapper'
 * @param {Object} blocks - Объект с данными, содержащий MainBlock с секциями
 * @returns {void} Ничего не возвращает
 */
const showActiveArea = (blocks) =&gt; {
    const activeAreaDiv = document.getElementById('area-active')

    const activeAreaInfo = getAreaInfoByName(activeAreaDiv.textContent, blocks)

    const areaInfoContainer = document.getElementById('active-area-wrapper')
    areaInfoContainer.innerHTML = ''

    let numOfCols = 5
    const screenWidth = window.innerWidth

    if (screenWidth &lt;= 1024) {
        numOfCols = 2
    } else if (screenWidth &lt; 1750) {
        numOfCols = 3
    } else if (screenWidth &lt;= 1920) {
        numOfCols = 4
    }

    // activeAreaInfo.Parameters = shuffle(activeAreaInfo.Parameters).slice(0, 15)

    for (let i = 0; i &lt; activeAreaInfo.Parameters.length; i += numOfCols) {

        const servers = activeAreaInfo.Parameters.slice(i, i + numOfCols)

        const row = document.createElement("div")
        row.className = 'active-area-row'

        servers.forEach(server =&gt; {
            const activeAreaContaier = document.createElement('div')
            activeAreaContaier.className = 'active-area-container'

            const activeAreaHeading = document.createElement('h1')
            activeAreaHeading.textContent = server.IP + " " + server.Role

            const recordsContainer = document.createElement('div')
            recordsContainer.className = 'records-container'

            server.Probes = shuffle(makeJSONUnique(server.Probes)).slice(0, 15)

            for (let j = 0; j &lt; server.Probes.length; j++) {
                const record = server.Probes[j]

                const recordDiv = document.createElement('div')
                recordDiv.className = 'record-div'

                const recordText = document.createElement('p')

                // if (record.domain === null) {
                // recordText.textContent = record.type
                // } else {
                // recordText.textContent = record.domain + "/" + record.type
                // }

                if (record.Name === "SOA" &amp;&amp; !flag) {
                    flag = true
                } else {
                    recordText.textContent = record.Name

                    recordDiv.appendChild(recordText)

                    recordsContainer.append(recordDiv)
                }
            }

            activeAreaContaier.appendChild(activeAreaHeading)
            activeAreaContaier.appendChild(recordsContainer)

            row.appendChild(activeAreaContaier)
        })

        areaInfoContainer.appendChild(row)
    }

}

export { showAreas }</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#getAreaInfoByName">getAreaInfoByName</a></li><li><a href="global.html#showActiveArea">showActiveArea</a></li><li><a href="global.html#showAreas">showAreas</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Jun 05 2025 15:30:07 GMT+0300 (Москва, стандартное время)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>


</div><div><h1>global.html</h1>

<div id="main">

    <h1 class="page-title">Global</h1>

    




<section>

<header>
    
        <h2></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="fetchZones"><span class="type-signature">(async) </span>fetchZones<span class="signature">()</span><span class="type-signature"> → {Promise.&lt;number&gt;}</span></h4>
    

    



<div class="description">
    Асинхронно получает данные, сохраняет их в локальное хранилище и отображает тесты и области
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app.js.html">app.js</a>, <a href="app.js.html#line24">line 24</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Число 0 после успешного выполнения
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;number&gt;</span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#fetchZones">fetchZones</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Jun 05 2025 16:28:24 GMT+0300 (Москва, стандартное время)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>

</div><div><h1>index.html</h1>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    









</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#fetchZones">fetchZones</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Jun 05 2025 16:28:24 GMT+0300 (Москва, стандартное время)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>

</div><div><h1>localStorage.js.html</h1>

<div id="main">

    <h1 class="page-title">Source: localStorage.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Сохраняет объект данных в локальное хранилище под ключом "DATA"
 * @param {Object} blocks - Объект данных для сохранения
 * @returns {void} Ничего не возвращает
 */
function saveToLocalStorage(blocks) {
    localStorage.setItem("DATA", JSON.stringify(blocks))
}

/**
 * Получает данные из локального хранилища по ключу "DATA"
 * @returns {string|null} Строку JSON с данными или null, если данные отсутствуют
 */
function getFromLocalStorage() {
    return localStorage.getItem("DATA")
}

export { saveToLocalStorage, getFromLocalStorage }</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#getFromLocalStorage">getFromLocalStorage</a></li><li><a href="global.html#saveToLocalStorage">saveToLocalStorage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Jun 05 2025 15:50:19 GMT+0300 (Москва, стандартное время)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>


</div><div><h1>makeJSONUnique.js.html</h1>

<div id="main">

    <h1 class="page-title">Source: makeJSONUnique.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
/**
 * Удаляет дубликаты из массива объектов, преобразуя их в уникальный массив
 * @param {Array&lt;Object&gt;} sections - Массив объектов для обработки
 * @returns {Array&lt;Object&gt;} Массив уникальных объектов
 */

export const makeJSONUnique = (sections) =&gt; {
    return [...new Set(
        sections.map(item =&gt; JSON.stringify(item))
    )].map(item =&gt; JSON.parse(item));
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#makeJSONUnique">makeJSONUnique</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Jun 05 2025 15:52:37 GMT+0300 (Москва, стандартное время)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>


</div><div><h1>shuffle.js.html</h1>

<div id="main">

    <h1 class="page-title">Source: shuffle.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
/**
 * Перемешивает элементы массива случайным образом с использованием алгоритма Фишера-Йетса
 * @param {Array} array - Массив для перемешивания
 * @returns {Array} Перемешанный массив
 */
export function shuffle(array) {
  let currentIndex = array.length;

  while (currentIndex != 0) {

    let randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;

    [array[currentIndex], array[randomIndex]] = [
      array[randomIndex], array[currentIndex]];
  }

  return array
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#shuffle">shuffle</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Jun 05 2025 15:50:36 GMT+0300 (Москва, стандартное время)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>


</div><div><h1>tests.js.html</h1>

<div id="main">

    <h1 class="page-title">Source: tests.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { shuffle } from "../utils/shuffle.js";

/**
 * Отображает до 10 тестов в HTML-контейнере с идентификатором 'tests-container', группируя их по 5 в строке
 * @param {Object} blocks - Объект с данными, содержащий TopBlock с параметрами тестов
 * @returns {void} Ничего не возвращает
 */
const showTests = (blocks) =&gt; {
    const testsContainer = document.getElementById('tests-container')
    testsContainer.innerHTML = '';
    const tests = shuffle(blocks.TopBlock.Parameters).slice(0, 10)

    for (let i = 0; i &lt; tests.length; i += 5) {
        const row = document.createElement('div')
        row.className = 'row'
        
        let rowOfTests = tests.slice(i, i + 5)
        
        rowOfTests.forEach(test =&gt; {
            const testDiv = document.createElement('div');
            testDiv.className = 'test-div';

            if (test.success === true || test.success === "true") {
                testDiv.style.backgroundColor = '#08fc64';
            } else {
                testDiv.style.backgroundColor = '#ff6464';
            }

            const headingContainer = document.createElement('div')
            headingContainer.className = 'heading-container'

            const nsName = document.createElement('h2')
            nsName.textContent = test.GeneralName || "N/A"

            const typeName = document.createElement('h3')
            typeName.textContent = test.ProbeName;

            headingContainer.appendChild(nsName)
            headingContainer.appendChild(typeName)

            const footerContainer = document.createElement('div')

            footerContainer.className = "footer-container"

            const ipName = document.createElement('p')
            ipName.textContent = test.ip;

            const lamp = document.createElement('p')
            lamp.className = "lamp"
            lamp.id = "lamp" + test.ip + test.GeneralName + test.GeneralName
            lamp.innerHTML = "💡"

            footerContainer.appendChild(ipName)
            footerContainer.appendChild(lamp)

            testDiv.appendChild(headingContainer)
            testDiv.appendChild(footerContainer)

            // lamp.addEventListener("click", () =&gt; {
            //     if (testDiv.innerHTML === "") {
            //         testDiv.appendChild(headingContainer)
            //         testDiv.appendChild(footerContainer)
            //     } else {
            //         const descriptionDiv = document.createElement("div")
            //         descriptionDiv.className = "description-container"
            //         let isAvailable = "доступен"

            //         if (test.success !== true) {
            //             isAvailable = "недоступен"
            //         }

            //         const description = document.createElement("p")

            //         description.innerHTML = "Авторитативный сервер " + test.GeneralName + " c ip адресом " +
            //             test.ip + " " + isAvailable + " через " + test.ProbeName;

            //         const turnBackImg = document.createElement("img")
            //         turnBackImg.src = "../../static/images/icon-left-turn.png"
            //         testDiv.innerHTML = ""

            //         turnBackImg.addEventListener("click", () =&gt; {
            //             testDiv.innerHTML = ""
            //             testDiv.appendChild(headingContainer)
            //             testDiv.appendChild(footerContainer)
            //         })

            //         descriptionDiv.appendChild(description)
            //         descriptionDiv.appendChild(turnBackImg)

            //         testDiv.appendChild(descriptionDiv)
            //     }
            // })

            row.appendChild(testDiv)
        })

        testsContainer.appendChild(row)

    }
}

export { showTests }

// #08fc64
// #ff6464
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#showTests">showTests</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Jun 05 2025 15:32:20 GMT+0300 (Москва, стандартное время)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>


</div><div><h1>truncateWord.js.html</h1>

<div id="main">

    <h1 class="page-title">Source: truncateWord.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Обрезает строку до указанной длины, добавляя "..." в конец, если строка превышает максимальную длину
 * @param {string} word - Строка для обрезки
 * @param {number} maxLength - Максимальная длина строки
 * @returns {string} Обрезанная строка или исходная строка, если её длина меньше или равна maxLength
 */
export const truncateWord = (word, maxLength) =&gt; {
    if (word.length &gt; maxLength) {
        return word.slice(0, maxLength) + "...";
    }
    return word;
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#truncateWord">truncateWord</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Jun 05 2025 15:48:40 GMT+0300 (Москва, стандартное время)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>


</div>
      </body>
      </html>
    